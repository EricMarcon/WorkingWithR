<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Continuous integration | Working with R</title>
  <meta name="description" content="Organization of work around R and RStudio" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Continuous integration | Working with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Organization of work around R and RStudio" />
  <meta name="github-repo" content="EricMarcon/WorkingWithR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Continuous integration | Working with R" />
  
  <meta name="twitter:description" content="Organization of work around R and RStudio" />
  

<meta name="author" content="Eric Marcon" />


<meta name="date" content="2022-07-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-package.html"/>
<link rel="next" href="chap-shiny.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="libs/tabwid-1.0.0/scrool.css" rel="stylesheet" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7NVD1TWMCJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7NVD1TWMCJ');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Working With R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectives"><i class="fa fa-check"></i>Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap-logiciels.html"><a href="chap-logiciels.html"><i class="fa fa-check"></i><b>1</b> Software</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#r"><i class="fa fa-check"></i><b>1.1</b> R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation"><i class="fa fa-check"></i><b>1.1.1</b> Installation</a></li>
<li class="chapter" data-level="1.1.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#rtools"><i class="fa fa-check"></i><b>1.1.2</b> Rtools</a></li>
<li class="chapter" data-level="1.1.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#update"><i class="fa fa-check"></i><b>1.1.3</b> Update</a></li>
<li class="chapter" data-level="1.1.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:librairies"><i class="fa fa-check"></i><b>1.1.4</b> Libraries</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-1"><i class="fa fa-check"></i><b>1.2.1</b> Installation</a></li>
<li class="chapter" data-level="1.2.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#file-encoding"><i class="fa fa-check"></i><b>1.2.2</b> File encoding</a></li>
<li class="chapter" data-level="1.2.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#working-folder"><i class="fa fa-check"></i><b>1.2.3</b> Working folder</a></li>
<li class="chapter" data-level="1.2.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:solution-dossiers"><i class="fa fa-check"></i><b>1.2.4</b> Solution chosen</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#packages"><i class="fa fa-check"></i><b>1.3</b> Packages</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-from-cran"><i class="fa fa-check"></i><b>1.3.1</b> Installation from CRAN</a></li>
<li class="chapter" data-level="1.3.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-from-github"><i class="fa fa-check"></i><b>1.3.2</b> Installation from GitHub</a></li>
<li class="chapter" data-level="1.3.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#installation-from-bioconductor"><i class="fa fa-check"></i><b>1.3.3</b> Installation from Bioconductor</a></li>
<li class="chapter" data-level="1.3.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#selected-solution"><i class="fa fa-check"></i><b>1.3.4</b> Selected solution</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#git-and-github"><i class="fa fa-check"></i><b>1.4</b> git and GitHub</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#git"><i class="fa fa-check"></i><b>1.4.1</b> git</a></li>
<li class="chapter" data-level="1.4.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#github"><i class="fa fa-check"></i><b>1.4.2</b> GitHub</a></li>
<li class="chapter" data-level="1.4.3" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:SSH"><i class="fa fa-check"></i><b>1.4.3</b> SSH authentication</a></li>
<li class="chapter" data-level="1.4.4" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:pat"><i class="fa fa-check"></i><b>1.4.4</b> Obtaining a personal access token</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="chap-logiciels.html"><a href="chap-logiciels.html#latex-compiler"><i class="fa fa-check"></i><b>1.5</b> LaTeX compiler</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="chap-logiciels.html"><a href="chap-logiciels.html#tinytex"><i class="fa fa-check"></i><b>1.5.1</b> tinytex</a></li>
<li class="chapter" data-level="1.5.2" data-path="chap-logiciels.html"><a href="chap-logiciels.html#miktex"><i class="fa fa-check"></i><b>1.5.2</b> MiKTeX</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="chap-logiciels.html"><a href="chap-logiciels.html#sec:Zotero"><i class="fa fa-check"></i><b>1.6</b> Zotero</a></li>
<li class="chapter" data-level="1.7" data-path="chap-logiciels.html"><a href="chap-logiciels.html#go"><i class="fa fa-check"></i><b>1.7</b> Go</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html"><i class="fa fa-check"></i><b>2</b> Use R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#the-languages-of-r"><i class="fa fa-check"></i><b>2.1</b> The languages of R</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#base"><i class="fa fa-check"></i><b>2.1.1</b> Base</a></li>
<li class="chapter" data-level="2.1.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:S3"><i class="fa fa-check"></i><b>2.1.2</b> S3</a></li>
<li class="chapter" data-level="2.1.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#s4"><i class="fa fa-check"></i><b>2.1.3</b> S4</a></li>
<li class="chapter" data-level="2.1.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rc"><i class="fa fa-check"></i><b>2.1.4</b> RC</a></li>
<li class="chapter" data-level="2.1.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#s6"><i class="fa fa-check"></i><b>2.1.5</b> S6</a></li>
<li class="chapter" data-level="2.1.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#tidyverse"><i class="fa fa-check"></i><b>2.1.6</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:environnements"><i class="fa fa-check"></i><b>2.2</b> Environments</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#organization"><i class="fa fa-check"></i><b>2.2.1</b> Organization</a></li>
<li class="chapter" data-level="2.2.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#search"><i class="fa fa-check"></i><b>2.2.2</b> Search</a></li>
<li class="chapter" data-level="2.2.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#package-namespaces"><i class="fa fa-check"></i><b>2.2.3</b> Package namespaces</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#measuring-execution-time"><i class="fa fa-check"></i><b>2.3</b> Measuring execution time</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#system.time"><i class="fa fa-check"></i><b>2.3.1</b> system.time</a></li>
<li class="chapter" data-level="2.3.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#microbenchmark"><i class="fa fa-check"></i><b>2.3.2</b> microbenchmark</a></li>
<li class="chapter" data-level="2.3.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#profiling"><i class="fa fa-check"></i><b>2.3.3</b> Profiling</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#loops"><i class="fa fa-check"></i><b>2.4</b> Loops</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#vector-functions"><i class="fa fa-check"></i><b>2.4.1</b> Vector functions</a></li>
<li class="chapter" data-level="2.4.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#lapply"><i class="fa fa-check"></i><b>2.4.2</b> lapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#for-loops"><i class="fa fa-check"></i><b>2.4.3</b> For loops</a></li>
<li class="chapter" data-level="2.4.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#replicate"><i class="fa fa-check"></i><b>2.4.4</b> replicate</a></li>
<li class="chapter" data-level="2.4.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#vectorize"><i class="fa fa-check"></i><b>2.4.5</b> Vectorize</a></li>
<li class="chapter" data-level="2.4.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#marginal-statistics"><i class="fa fa-check"></i><b>2.4.6</b> Marginal statistics</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:cpp"><i class="fa fa-check"></i><b>2.5</b> C++ code</a></li>
<li class="chapter" data-level="2.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#parallelizing-r"><i class="fa fa-check"></i><b>2.6</b> Parallelizing R</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#mclapply-fork"><i class="fa fa-check"></i><b>2.6.1</b> mclapply (fork)</a></li>
<li class="chapter" data-level="2.6.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#parlapply-socket"><i class="fa fa-check"></i><b>2.6.2</b> parLapply (socket)</a></li>
<li class="chapter" data-level="2.6.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#foreach"><i class="fa fa-check"></i><b>2.6.3</b> foreach</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:cas"><i class="fa fa-check"></i><b>2.7</b> Case study</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#creation-of-the-data"><i class="fa fa-check"></i><b>2.7.1</b> Creation of the data</a></li>
<li class="chapter" data-level="2.7.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#spatstat"><i class="fa fa-check"></i><b>2.7.2</b> Spatstat</a></li>
<li class="chapter" data-level="2.7.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#apply"><i class="fa fa-check"></i><b>2.7.3</b> apply</a></li>
<li class="chapter" data-level="2.7.4" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#for-loop"><i class="fa fa-check"></i><b>2.7.4</b> for loop</a></li>
<li class="chapter" data-level="2.7.5" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#foreach-loop"><i class="fa fa-check"></i><b>2.7.5</b> foreach loop</a></li>
<li class="chapter" data-level="2.7.6" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rcpp"><i class="fa fa-check"></i><b>2.7.6</b> RCpp</a></li>
<li class="chapter" data-level="2.7.7" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#rcppparallel"><i class="fa fa-check"></i><b>2.7.7</b> RcppParallel</a></li>
<li class="chapter" data-level="2.7.8" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#conclusions-on-code-speed-optimization"><i class="fa fa-check"></i><b>2.7.8</b> Conclusions on code speed optimization</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#sec:targets"><i class="fa fa-check"></i><b>2.8</b> Workflow</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#how-it-works-1"><i class="fa fa-check"></i><b>2.8.1</b> How it works</a></li>
<li class="chapter" data-level="2.8.2" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#minimal-example"><i class="fa fa-check"></i><b>2.8.2</b> Minimal example</a></li>
<li class="chapter" data-level="2.8.3" data-path="chap-utiliseR.html"><a href="chap-utiliseR.html#practical-interest"><i class="fa fa-check"></i><b>2.8.3</b> Practical interest</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-git.html"><a href="chap-git.html"><i class="fa fa-check"></i><b>3</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chap-git.html"><a href="chap-git.html#sec:principes-git"><i class="fa fa-check"></i><b>3.1</b> Principles</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="chap-git.html"><a href="chap-git.html#sec:git-cds"><i class="fa fa-check"></i><b>3.1.1</b> Source control</a></li>
<li class="chapter" data-level="3.1.2" data-path="chap-git.html"><a href="chap-git.html#git-and-github-1"><i class="fa fa-check"></i><b>3.1.2</b> git and GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="chap-git.html"><a href="chap-git.html#sec:creerdepot"><i class="fa fa-check"></i><b>3.2</b> Create a new repository</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="chap-git.html"><a href="chap-git.html#from-an-existing-project"><i class="fa fa-check"></i><b>3.2.1</b> From an existing project</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-git.html"><a href="chap-git.html#taking-files-into-account"><i class="fa fa-check"></i><b>3.2.2</b> Taking files into account</a></li>
<li class="chapter" data-level="3.2.3" data-path="chap-git.html"><a href="chap-git.html#committing-changes"><i class="fa fa-check"></i><b>3.2.3</b> Committing changes</a></li>
<li class="chapter" data-level="3.2.4" data-path="chap-git.html"><a href="chap-git.html#create-an-empty-repository-on-github"><i class="fa fa-check"></i><b>3.2.4</b> Create an empty repository on GitHub</a></li>
<li class="chapter" data-level="3.2.5" data-path="chap-git.html"><a href="chap-git.html#linking-git-and-github"><i class="fa fa-check"></i><b>3.2.5</b> Linking git and GitHub</a></li>
<li class="chapter" data-level="3.2.6" data-path="chap-git.html"><a href="chap-git.html#push-the-first-modifications"><i class="fa fa-check"></i><b>3.2.6</b> Push the first modifications</a></li>
<li class="chapter" data-level="3.2.7" data-path="chap-git.html"><a href="chap-git.html#clone-a-repository-from-github"><i class="fa fa-check"></i><b>3.2.7</b> Clone a repository from GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chap-git.html"><a href="chap-git.html#common-usage"><i class="fa fa-check"></i><b>3.3</b> Common usage</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="chap-git.html"><a href="chap-git.html#pull-modify-commit-push"><i class="fa fa-check"></i><b>3.3.1</b> Pull, modify, commit, push</a></li>
<li class="chapter" data-level="3.3.2" data-path="chap-git.html"><a href="chap-git.html#resolve-conflicts"><i class="fa fa-check"></i><b>3.3.2</b> Resolve conflicts</a></li>
<li class="chapter" data-level="3.3.3" data-path="chap-git.html"><a href="chap-git.html#see-the-differences"><i class="fa fa-check"></i><b>3.3.3</b> See the differences</a></li>
<li class="chapter" data-level="3.3.4" data-path="chap-git.html"><a href="chap-git.html#revert"><i class="fa fa-check"></i><b>3.3.4</b> Revert</a></li>
<li class="chapter" data-level="3.3.5" data-path="chap-git.html"><a href="chap-git.html#view-history"><i class="fa fa-check"></i><b>3.3.5</b> View history</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="chap-git.html"><a href="chap-git.html#sec:branches"><i class="fa fa-check"></i><b>3.4</b> Branches</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="chap-git.html"><a href="chap-git.html#create-a-new-branch"><i class="fa fa-check"></i><b>3.4.1</b> Create a new branch</a></li>
<li class="chapter" data-level="3.4.2" data-path="chap-git.html"><a href="chap-git.html#change-branch"><i class="fa fa-check"></i><b>3.4.2</b> Change branch</a></li>
<li class="chapter" data-level="3.4.3" data-path="chap-git.html"><a href="chap-git.html#pushing-the-new-branch"><i class="fa fa-check"></i><b>3.4.3</b> Pushing the new branch</a></li>
<li class="chapter" data-level="3.4.4" data-path="chap-git.html"><a href="chap-git.html#filesystem-behavior"><i class="fa fa-check"></i><b>3.4.4</b> Filesystem behavior</a></li>
<li class="chapter" data-level="3.4.5" data-path="chap-git.html"><a href="chap-git.html#merge-with-merge"><i class="fa fa-check"></i><b>3.4.5</b> Merge with <code>merge</code></a></li>
<li class="chapter" data-level="3.4.6" data-path="chap-git.html"><a href="chap-git.html#merging-with-a-pull-request"><i class="fa fa-check"></i><b>3.4.6</b> Merging with a pull request</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="chap-git.html"><a href="chap-git.html#advanced-usage"><i class="fa fa-check"></i><b>3.5</b> Advanced usage</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="chap-git.html"><a href="chap-git.html#git-commands"><i class="fa fa-check"></i><b>3.5.1</b> Git commands</a></li>
<li class="chapter" data-level="3.5.2" data-path="chap-git.html"><a href="chap-git.html#size-of-a-repository"><i class="fa fa-check"></i><b>3.5.2</b> Size of a repository</a></li>
<li class="chapter" data-level="3.5.3" data-path="chap-git.html"><a href="chap-git.html#delete-a-folder"><i class="fa fa-check"></i><b>3.5.3</b> Delete a folder</a></li>
<li class="chapter" data-level="3.5.4" data-path="chap-git.html"><a href="chap-git.html#revert-1"><i class="fa fa-check"></i><b>3.5.4</b> Revert</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="chap-git.html"><a href="chap-git.html#sec:confidential"><i class="fa fa-check"></i><b>3.6</b> Confidential data in a public repository</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="chap-git.html"><a href="chap-git.html#generating-a-key-pair-for-the-project-owner"><i class="fa fa-check"></i><b>3.6.1</b> Generating a key pair for the project owner</a></li>
<li class="chapter" data-level="3.6.2" data-path="chap-git.html"><a href="chap-git.html#generating-a-key-pair-for-the-project"><i class="fa fa-check"></i><b>3.6.2</b> Generating a key pair for the project</a></li>
<li class="chapter" data-level="3.6.3" data-path="chap-git.html"><a href="chap-git.html#creating-a-safe"><i class="fa fa-check"></i><b>3.6.3</b> Creating a safe</a></li>
<li class="chapter" data-level="3.6.4" data-path="chap-git.html"><a href="chap-git.html#adding-users"><i class="fa fa-check"></i><b>3.6.4</b> Adding users</a></li>
<li class="chapter" data-level="3.6.5" data-path="chap-git.html"><a href="chap-git.html#storing-the-data"><i class="fa fa-check"></i><b>3.6.5</b> Storing the data</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="chap-git.html"><a href="chap-git.html#sec:github-pages"><i class="fa fa-check"></i><b>3.7</b> GitHub pages</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="chap-git.html"><a href="chap-git.html#activation"><i class="fa fa-check"></i><b>3.7.1</b> Activation</a></li>
<li class="chapter" data-level="3.7.2" data-path="chap-git.html"><a href="chap-git.html#badges"><i class="fa fa-check"></i><b>3.7.2</b> Badges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-rediger.html"><a href="chap-rediger.html"><i class="fa fa-check"></i><b>4</b> Writing</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chap-rediger.html"><a href="chap-rediger.html#markdown-notebook-r-notebook"><i class="fa fa-check"></i><b>4.1</b> Markdown notebook (R Notebook)</a></li>
<li class="chapter" data-level="4.2" data-path="chap-rediger.html"><a href="chap-rediger.html#r-markdown-templates"><i class="fa fa-check"></i><b>4.2</b> R Markdown templates</a></li>
<li class="chapter" data-level="4.3" data-path="chap-rediger.html"><a href="chap-rediger.html#articles-with-bookdown"><i class="fa fa-check"></i><b>4.3</b> Articles with bookdown</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="chap-rediger.html"><a href="chap-rediger.html#writing"><i class="fa fa-check"></i><b>4.3.1</b> Writing</a></li>
<li class="chapter" data-level="4.3.2" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:memo"><i class="fa fa-check"></i><b>4.3.2</b> Simple Article template</a></li>
<li class="chapter" data-level="4.3.3" data-path="chap-rediger.html"><a href="chap-rediger.html#other-templates"><i class="fa fa-check"></i><b>4.3.3</b> Other templates</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="chap-rediger.html"><a href="chap-rediger.html#beamer-presentation"><i class="fa fa-check"></i><b>4.4</b> Beamer Presentation</a></li>
<li class="chapter" data-level="4.5" data-path="chap-rediger.html"><a href="chap-rediger.html#memoir"><i class="fa fa-check"></i><b>4.5</b> memoir</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="chap-rediger.html"><a href="chap-rediger.html#create-1"><i class="fa fa-check"></i><b>4.5.1</b> Create</a></li>
<li class="chapter" data-level="4.5.2" data-path="chap-rediger.html"><a href="chap-rediger.html#write-1"><i class="fa fa-check"></i><b>4.5.2</b> Write</a></li>
<li class="chapter" data-level="4.5.3" data-path="chap-rediger.html"><a href="chap-rediger.html#knit-1"><i class="fa fa-check"></i><b>4.5.3</b> Knit</a></li>
<li class="chapter" data-level="4.5.4" data-path="chap-rediger.html"><a href="chap-rediger.html#finishing"><i class="fa fa-check"></i><b>4.5.4</b> Finishing</a></li>
<li class="chapter" data-level="4.5.5" data-path="chap-rediger.html"><a href="chap-rediger.html#gitbook-site"><i class="fa fa-check"></i><b>4.5.5</b> Gitbook site</a></li>
<li class="chapter" data-level="4.5.6" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:rediger-ouvrage-ci"><i class="fa fa-check"></i><b>4.5.6</b> Continuous integration</a></li>
<li class="chapter" data-level="4.5.7" data-path="chap-rediger.html"><a href="chap-rediger.html#google-analytics"><i class="fa fa-check"></i><b>4.5.7</b> Google Analytics</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="chap-rediger.html"><a href="chap-rediger.html#r-markdown-web-site"><i class="fa fa-check"></i><b>4.6</b> R Markdown web site</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="chap-rediger.html"><a href="chap-rediger.html#template"><i class="fa fa-check"></i><b>4.6.1</b> Template</a></li>
<li class="chapter" data-level="4.6.2" data-path="chap-rediger.html"><a href="chap-rediger.html#improvements"><i class="fa fa-check"></i><b>4.6.2</b> Improvements</a></li>
<li class="chapter" data-level="4.6.3" data-path="chap-rediger.html"><a href="chap-rediger.html#source-control"><i class="fa fa-check"></i><b>4.6.3</b> Source control</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:blogdown"><i class="fa fa-check"></i><b>4.7</b> Personal web site: blogdown</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="chap-rediger.html"><a href="chap-rediger.html#installing-the-tools"><i class="fa fa-check"></i><b>4.7.1</b> Installing the tools</a></li>
<li class="chapter" data-level="4.7.2" data-path="chap-rediger.html"><a href="chap-rediger.html#create-2"><i class="fa fa-check"></i><b>4.7.2</b> Create</a></li>
<li class="chapter" data-level="4.7.3" data-path="chap-rediger.html"><a href="chap-rediger.html#building-the-site"><i class="fa fa-check"></i><b>4.7.3</b> Building the site</a></li>
<li class="chapter" data-level="4.7.4" data-path="chap-rediger.html"><a href="chap-rediger.html#multilingual-site"><i class="fa fa-check"></i><b>4.7.4</b> Multilingual site</a></li>
<li class="chapter" data-level="4.7.5" data-path="chap-rediger.html"><a href="chap-rediger.html#set-up"><i class="fa fa-check"></i><b>4.7.5</b> Set up</a></li>
<li class="chapter" data-level="4.7.6" data-path="chap-rediger.html"><a href="chap-rediger.html#write-2"><i class="fa fa-check"></i><b>4.7.6</b> Write</a></li>
<li class="chapter" data-level="4.7.7" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:rediger-web-ci"><i class="fa fa-check"></i><b>4.7.7</b> Continuous integration</a></li>
<li class="chapter" data-level="4.7.8" data-path="chap-rediger.html"><a href="chap-rediger.html#updates-1"><i class="fa fa-check"></i><b>4.7.8</b> Updates</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="chap-rediger.html"><a href="chap-rediger.html#exporting-figures"><i class="fa fa-check"></i><b>4.8</b> Exporting figures</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="chap-rediger.html"><a href="chap-rediger.html#vector-and-raster-formats"><i class="fa fa-check"></i><b>4.8.1</b> Vector and Raster Formats</a></li>
<li class="chapter" data-level="4.8.2" data-path="chap-rediger.html"><a href="chap-rediger.html#functions"><i class="fa fa-check"></i><b>4.8.2</b> Functions</a></li>
<li class="chapter" data-level="4.8.3" data-path="chap-rediger.html"><a href="chap-rediger.html#ragg-package"><i class="fa fa-check"></i><b>4.8.3</b> ragg package</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="chap-rediger.html"><a href="chap-rediger.html#sec:targetsmd"><i class="fa fa-check"></i><b>4.9</b> Workflow</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="chap-rediger.html"><a href="chap-rediger.html#declaration-of-the-workflow"><i class="fa fa-check"></i><b>4.9.1</b> Declaration of the workflow</a></li>
<li class="chapter" data-level="4.9.2" data-path="chap-rediger.html"><a href="chap-rediger.html#declaration-of-targets"><i class="fa fa-check"></i><b>4.9.2</b> Declaration of targets</a></li>
<li class="chapter" data-level="4.9.3" data-path="chap-rediger.html"><a href="chap-rediger.html#running-the-workflow"><i class="fa fa-check"></i><b>4.9.3</b> Running the workflow</a></li>
<li class="chapter" data-level="4.9.4" data-path="chap-rediger.html"><a href="chap-rediger.html#using-the-results"><i class="fa fa-check"></i><b>4.9.4</b> Using the results</a></li>
<li class="chapter" data-level="4.9.5" data-path="chap-rediger.html"><a href="chap-rediger.html#source-control-1"><i class="fa fa-check"></i><b>4.9.5</b> Source control</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-package.html"><a href="chap-package.html"><i class="fa fa-check"></i><b>5</b> Package</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chap-package.html"><a href="chap-package.html#first-package"><i class="fa fa-check"></i><b>5.1</b> First package</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="chap-package.html"><a href="chap-package.html#creation"><i class="fa fa-check"></i><b>5.1.1</b> Creation</a></li>
<li class="chapter" data-level="5.1.2" data-path="chap-package.html"><a href="chap-package.html#first-function"><i class="fa fa-check"></i><b>5.1.2</b> First function</a></li>
<li class="chapter" data-level="5.1.3" data-path="chap-package.html"><a href="chap-package.html#sec:package-cds"><i class="fa fa-check"></i><b>5.1.3</b> Source control</a></li>
<li class="chapter" data-level="5.1.4" data-path="chap-package.html"><a href="chap-package.html#package.r"><i class="fa fa-check"></i><b>5.1.4</b> package.R</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="chap-package.html"><a href="chap-package.html#package-organization"><i class="fa fa-check"></i><b>5.2</b> Package organization</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chap-package.html"><a href="chap-package.html#sec:package-description"><i class="fa fa-check"></i><b>5.2.1</b> DESCRIPTION file</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-package.html"><a href="chap-package.html#news.md-file"><i class="fa fa-check"></i><b>5.2.2</b> NEWS.md file</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-package.html"><a href="chap-package.html#vignette"><i class="fa fa-check"></i><b>5.3</b> Vignette</a></li>
<li class="chapter" data-level="5.4" data-path="chap-package.html"><a href="chap-package.html#pkgdown"><i class="fa fa-check"></i><b>5.4</b> pkgdown</a></li>
<li class="chapter" data-level="5.5" data-path="chap-package.html"><a href="chap-package.html#package-specific-code"><i class="fa fa-check"></i><b>5.5</b> Package specific code</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="chap-package.html"><a href="chap-package.html#importing-functions"><i class="fa fa-check"></i><b>5.5.1</b> Importing functions</a></li>
<li class="chapter" data-level="5.5.2" data-path="chap-package.html"><a href="chap-package.html#s3-methods"><i class="fa fa-check"></i><b>5.5.2</b> S3 methods</a></li>
<li class="chapter" data-level="5.5.3" data-path="chap-package.html"><a href="chap-package.html#in-practice"><i class="fa fa-check"></i><b>5.5.3</b> In practice</a></li>
<li class="chapter" data-level="5.5.4" data-path="chap-package.html"><a href="chap-package.html#c-code"><i class="fa fa-check"></i><b>5.5.4</b> C++ code</a></li>
<li class="chapter" data-level="5.5.5" data-path="chap-package.html"><a href="chap-package.html#tidy-package"><i class="fa fa-check"></i><b>5.5.5</b> Tidy package</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="chap-package.html"><a href="chap-package.html#bibliography-1"><i class="fa fa-check"></i><b>5.6</b> Bibliography</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="chap-package.html"><a href="chap-package.html#preparation"><i class="fa fa-check"></i><b>5.6.1</b> Preparation</a></li>
<li class="chapter" data-level="5.6.2" data-path="chap-package.html"><a href="chap-package.html#citations"><i class="fa fa-check"></i><b>5.6.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="chap-package.html"><a href="chap-package.html#data"><i class="fa fa-check"></i><b>5.7</b> Data</a></li>
<li class="chapter" data-level="5.8" data-path="chap-package.html"><a href="chap-package.html#unit-tests"><i class="fa fa-check"></i><b>5.8</b> Unit tests</a></li>
<li class="chapter" data-level="5.9" data-path="chap-package.html"><a href="chap-package.html#gitignore-file"><i class="fa fa-check"></i><b>5.9</b> .gitignore file</a></li>
<li class="chapter" data-level="5.10" data-path="chap-package.html"><a href="chap-package.html#sec:package-ci5"><i class="fa fa-check"></i><b>5.10</b> Continuous integration</a></li>
<li class="chapter" data-level="5.11" data-path="chap-package.html"><a href="chap-package.html#sec:package-cran"><i class="fa fa-check"></i><b>5.11</b> CRAN</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="chap-package.html"><a href="chap-package.html#testing-the-package"><i class="fa fa-check"></i><b>5.11.1</b> Testing the package</a></li>
<li class="chapter" data-level="5.11.2" data-path="chap-package.html"><a href="chap-package.html#submission"><i class="fa fa-check"></i><b>5.11.2</b> Submission</a></li>
<li class="chapter" data-level="5.11.3" data-path="chap-package.html"><a href="chap-package.html#maintenance"><i class="fa fa-check"></i><b>5.11.3</b> Maintenance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-ci.html"><a href="chap-ci.html"><i class="fa fa-check"></i><b>6</b> Continuous integration</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chap-ci.html"><a href="chap-ci.html#tools"><i class="fa fa-check"></i><b>6.1</b> Tools</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="chap-ci.html"><a href="chap-ci.html#github-actions"><i class="fa fa-check"></i><b>6.1.1</b> GitHub Actions</a></li>
<li class="chapter" data-level="6.1.2" data-path="chap-ci.html"><a href="chap-ci.html#codecov"><i class="fa fa-check"></i><b>6.1.2</b> Codecov</a></li>
<li class="chapter" data-level="6.1.3" data-path="chap-ci.html"><a href="chap-ci.html#github-pages"><i class="fa fa-check"></i><b>6.1.3</b> GitHub Pages</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="chap-ci.html"><a href="chap-ci.html#principles"><i class="fa fa-check"></i><b>6.2</b> Principles</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="chap-ci.html"><a href="chap-ci.html#getting-a-personal-access-token"><i class="fa fa-check"></i><b>6.2.1</b> Getting a personal access token</a></li>
<li class="chapter" data-level="6.2.2" data-path="chap-ci.html"><a href="chap-ci.html#sec:secrets-ci"><i class="fa fa-check"></i><b>6.2.2</b> Project secrets</a></li>
<li class="chapter" data-level="6.2.3" data-path="chap-ci.html"><a href="chap-ci.html#activation-of-the-repository-on-codecov"><i class="fa fa-check"></i><b>6.2.3</b> Activation of the repository on CodeCov</a></li>
<li class="chapter" data-level="6.2.4" data-path="chap-ci.html"><a href="chap-ci.html#scripting-github-actions"><i class="fa fa-check"></i><b>6.2.4</b> Scripting GitHub actions</a></li>
<li class="chapter" data-level="6.2.5" data-path="chap-ci.html"><a href="chap-ci.html#sec:confidentielCI"><i class="fa fa-check"></i><b>6.2.5</b> Confidential data in a public repository</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="chap-ci.html"><a href="chap-ci.html#script-templates"><i class="fa fa-check"></i><b>6.3</b> Script templates</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="chap-ci.html"><a href="chap-ci.html#sec:memoiR-ci"><i class="fa fa-check"></i><b>6.3.1</b> memoiR</a></li>
<li class="chapter" data-level="6.3.2" data-path="chap-ci.html"><a href="chap-ci.html#sec:bookdown-ci"><i class="fa fa-check"></i><b>6.3.2</b> Book or thesis</a></li>
<li class="chapter" data-level="6.3.3" data-path="chap-ci.html"><a href="chap-ci.html#articles-or-slideshows"><i class="fa fa-check"></i><b>6.3.3</b> Articles or slideshows</a></li>
<li class="chapter" data-level="6.3.4" data-path="chap-ci.html"><a href="chap-ci.html#sec:blogdown-ci"><i class="fa fa-check"></i><b>6.3.4</b> Blogdown website</a></li>
<li class="chapter" data-level="6.3.5" data-path="chap-ci.html"><a href="chap-ci.html#sec:package-ci6"><i class="fa fa-check"></i><b>6.3.5</b> R Packages</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="chap-ci.html"><a href="chap-ci.html#sec:ci-badges"><i class="fa fa-check"></i><b>6.4</b> Add badges</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-shiny.html"><a href="chap-shiny.html"><i class="fa fa-check"></i><b>7</b> Shiny</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chap-shiny.html"><a href="chap-shiny.html#first-application"><i class="fa fa-check"></i><b>7.1</b> First application</a></li>
<li class="chapter" data-level="7.2" data-path="chap-shiny.html"><a href="chap-shiny.html#more-elaborate-application"><i class="fa fa-check"></i><b>7.2</b> More elaborate application</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chap-shiny.html"><a href="chap-shiny.html#working-method"><i class="fa fa-check"></i><b>7.2.1</b> Working method</a></li>
<li class="chapter" data-level="7.2.2" data-path="chap-shiny.html"><a href="chap-shiny.html#example"><i class="fa fa-check"></i><b>7.2.2</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chap-shiny.html"><a href="chap-shiny.html#sec:hebergement-shiny"><i class="fa fa-check"></i><b>7.3</b> Hosting</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-enseigner.html"><a href="chap-enseigner.html"><i class="fa fa-check"></i><b>8</b> Teaching with R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#learnr"><i class="fa fa-check"></i><b>8.1</b> learnr</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#first-tutorial"><i class="fa fa-check"></i><b>8.1.1</b> First tutorial</a></li>
<li class="chapter" data-level="8.1.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#sharing"><i class="fa fa-check"></i><b>8.1.2</b> Sharing</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#github-classrooms"><i class="fa fa-check"></i><b>8.2</b> GitHub Classrooms</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="chap-enseigner.html"><a href="chap-enseigner.html#registration"><i class="fa fa-check"></i><b>8.2.1</b> Registration</a></li>
<li class="chapter" data-level="8.2.2" data-path="chap-enseigner.html"><a href="chap-enseigner.html#organizations"><i class="fa fa-check"></i><b>8.2.2</b> Organizations</a></li>
<li class="chapter" data-level="8.2.3" data-path="chap-enseigner.html"><a href="chap-enseigner.html#new-classroom"><i class="fa fa-check"></i><b>8.2.3</b> New Classroom</a></li>
<li class="chapter" data-level="8.2.4" data-path="chap-enseigner.html"><a href="chap-enseigner.html#prepare-a-repository-template"><i class="fa fa-check"></i><b>8.2.4</b> Prepare a repository template</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="chap-conclusion.html"><a href="chap-conclusion.html"><i class="fa fa-check"></i><b>9</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li>
  <a href="https://github.com/EricMarcon/WorkingWithR" target="blank">
    Hosted on GitHub, published with bookdown
  </a>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Working with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap-ci" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Continuous integration<a href="chap-ci.html#chap-ci" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Continuous integration is the process of assigning an external service to verify a package, produce Markdown documents for web pages in a GitHub repository, or completely knit a website from code.</p>
<p>All of these tasks can be done locally on the desktop but are time consuming and may not be repeated with each update.
In the context of continuous integration, they are systematically performed, in a transparent way for the user.
In case of failure, an alert message is sent.</p>
<p>The implementation of continuous integration is justified for heavy projects, with regular updates.
rather than for projects containing a simple Markdown document that is rarely modified.</p>
<div id="tools" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Tools<a href="chap-ci.html#tools" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="github-actions" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> GitHub Actions<a href="chap-ci.html#github-actions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most frequently used tool for R projects filed on GitHub was <em>Travis CI</em><a href="#fn103" class="footnote-ref" id="fnref103"><sup>103</sup></a> but the service became fee-based in 2021.</p>
<p>GitHub Shares is a good replacement for Travis.
This service is integrated with GitHub.</p>
</div>
<div id="codecov" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Codecov<a href="chap-ci.html#codecov" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To evaluate the code coverage rate of R packages, i.e. the proportion of code tested in some way (examples, unit tests, vignette), the <em>Codecov</em><a href="#fn104" class="footnote-ref" id="fnref104"><sup>104</sup></a> service integrates perfectly with GitHub.</p>
<p>You need to open an account, preferably by authenticating through GitHub.</p>
</div>
<div id="github-pages" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> GitHub Pages<a href="chap-ci.html#github-pages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>GitHub web pages can be hosted in the <code>docs</code> directory of the master branch of the project: this is the solution chosen when they are produced on the workstation.</p>
<p>If they are produced by continuous integration, they will be hosted in a dedicated branch called <code>gh-pages</code>.</p>
</div>
</div>
<div id="principles" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Principles<a href="chap-ci.html#principles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The production of a document is treated as an example.
The objective is to have GitHub knit a Markdown project.
This practice is appropriate for book projects, which require a lot of resources for their construction.
In this type of project, the code is knit by <strong>knitr</strong> to produce several documents, typically in HTML and PDF formats, accessible on GitHub pages.
When documents are produced locally, they are placed in the <code>docs</code> folder and pushed to GitHub.</p>
<p>In order for GitHub to do this, a few settings are required.</p>
<div id="getting-a-personal-access-token" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Getting a personal access token<a href="chap-ci.html#getting-a-personal-access-token" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To write to GitHub, the continuous integration service will have to authenticate with a Personal Access Token (PAT) whose creation is described in section <a href="chap-logiciels.html#sec:pat">1.4.4</a>.</p>
<p>Generate a new token, describe it as “GitHub Actions” and give it “repo” authorization, i.e. modify <em>all</em> repositories (it is not possible to limit access to a particular repository).</p>
</div>
<div id="sec:secrets-ci" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Project secrets<a href="chap-ci.html#sec:secrets-ci" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>On GitHub, display the project settings and select “Secrets”.
The “New Repository Secret” button allows you to store variables used in GitHub Actions scripts (publicly visible) without exposing their value.
The personal access token is essential for GitHub Actions to write their production in the project.
Create a secret named “GH_PAT” and enter the previously saved token value.
After clicking on “Add Secret”, the token cannot be read anymore.</p>
<p>To allow sending success or failure messages without exposing your email address, create a secret named “EMAIL” which contains it.</p>
</div>
<div id="activation-of-the-repository-on-codecov" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Activation of the repository on CodeCov<a href="chap-ci.html#activation-of-the-repository-on-codecov" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The analysis of the code coverage of packages is useful to detect untested code portions.
On the other hand, the analysis of the coverage of document projects is not useful.</p>
<p>To activate a repository, you need to authenticate on the CodeCov website with your GitHub account.
The list of repositories is displayed and can be updated.
If the repositories to be processed are hosted by an organization, for example the repositories of a GitHub classroom, you have to update the list of organizations by following the instructions (a link allows you to quickly modify the GitHub options to authorize Codecov to read the data of an organization) and update the list of repositories again.
Finally, when the repository you are looking for is visible, you have to activate it.
Ignore Codecov’s token system.</p>
</div>
<div id="scripting-github-actions" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> Scripting GitHub actions<a href="chap-ci.html#scripting-github-actions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A GitHub workflow is a succession of jobs with steps.
A workflow is triggered by an event, usually every <em>push</em> of the project, but also at regular intervals (<em>cron</em>).</p>
<p>Typically, the workflows created here contain two jobs: the first one installs R and the necessary components and executes R scripts (which constitute its successive steps); the second one publishes the obtained files in GitHub pages.</p>
<p>The workflows are configured in a YAML file placed in the <code>.github/workflows/</code> folder of the project.
The different parts of the script are presented below.
The full script is that of this document, accessible on GitHub<a href="#fn105" class="footnote-ref" id="fnref105"><sup>105</sup></a>.</p>
<div id="sec:declenchement" class="section level4 hasAnchor" number="6.2.4.1">
<h4><span class="header-section-number">6.2.4.1</span> Trigger<a href="chap-ci.html#sec:declenchement" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The action is triggered whenever updates are pushed to GitHub:</p>
<pre><code>on:
  push:
     branches:
       - master</code></pre>
<p>The branch taken into account is <em>master</em> (to be replaced by <em>main</em> if necessary).</p>
<p>To trigger the action periodically, use the syntax of cron (the Unix job scheduling system):</p>
<pre><code>on:
  schedule:
    - cron: &#39;0 22 * * 0&#39; # every sunday at 22:00</code></pre>
<p>The successive values are for minutes, hours, day (day of the month), month and day of the week (0 for Sunday to 6 for Saturday).
The <code>*</code> allow to ignore a value.</p>
<p>The <code>push</code> and <code>schedule</code> entries can be used together:</p>
<pre><code>on:
  push:
     branches:
       - master
  schedule:
    - cron: &#39;0 22 * * 0&#39;</code></pre>
<p>Currently, scheduling is only taken into account in the <em>master</em> branch.</p>
</div>
<div id="workflow-name" class="section level4 hasAnchor" number="6.2.4.2">
<h4><span class="header-section-number">6.2.4.2</span> Workflow name<a href="chap-ci.html#workflow-name" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The name of the workflow is free.
It will be displayed by the badge that will be added to the project’s <code>README.md</code> file (see section <a href="chap-ci.html#sec:ci-badges">6.4</a>).</p>
<pre><code>name: bookdown</code></pre>
</div>
<div id="first-job" class="section level4 hasAnchor" number="6.2.4.3">
<h4><span class="header-section-number">6.2.4.3</span> First job<a href="chap-ci.html#first-job" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The jobs are described in the <code>jobs</code> section.
<code>renderbook</code> is the name of the first job: it is free.
Here, the main action will be to produce a bookdown with the <code>render_book()</code> function, hence the name.</p>
<pre><code>jobs:
  renderbook:
    runs-on: macOS-latest</code></pre>
<p>The <code>runs-on</code> statement describes the operating system on which the job should run.
The possible choices are Windows, Ubuntu or MacOS<a href="#fn106" class="footnote-ref" id="fnref106"><sup>106</sup></a>.
Continuous integration of R on GitHub usually uses MacOS which has the advantage of using compiled R packages so much simpler (some packages require libraries outside of R for their compilation) and quicker to install, while allowing the use of scripts.</p>
</div>
<div id="first-steps" class="section level4 hasAnchor" number="6.2.4.4">
<h4><span class="header-section-number">6.2.4.4</span> First steps<a href="chap-ci.html#first-steps" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The steps are described in the <code>steps</code> section.</p>
<pre><code>    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
      - name: Setup R
        uses: r-lib/actions/setup-r@v1
      - name: Install pandoc
        run: |
          brew install pandoc</code></pre>
<p>Each step is described by its name (free) and what it does.</p>
<p>The strength of GitHub Actions is to allow the use of <em>actions</em> written by other people and stored in a public GitHub project.
An action is a script with metadata describing its use.
Its development is accompanied by successive version numbers.
An action is called by the statement <code>uses:</code>, the GitHub project that contains it and its version.</p>
<p>In their respective GitHub project, actions exist in their development version (<code>@master</code>) and in step versions (<em>release</em>) accessible by their number (<code>@v1</code>).
These stage versions are preferable because they are stable.</p>
<p>General actions are made available by GitHub in the GitHub Actions organization<a href="#fn107" class="footnote-ref" id="fnref107"><sup>107</sup></a>.
The “actions/checkout” action is used to get into the main branch of the project processed by the workflow: it is usually the first step of all workflows.</p>
<p>The next action is the installation of R, provided by the <em>R infrastructure</em> organization<a href="#fn108" class="footnote-ref" id="fnref108"><sup>108</sup></a>.</p>
<p>The installation of pandoc (software external to R but necessary for R Markdown) can be done by a command executed by MacOS.
It is called by <code>run:</code> and can contain several lines (hence the <code>|</code>).
This script depends on the operating system: <code>brew</code> is the package manager of MacOS.
To avoid system specifics, it is better to use an action:</p>
<pre><code>      - name: Install pandoc
        uses: r-lib/actions/setup-pandoc@v1</code></pre>
</div>
<div id="caches" class="section level4 hasAnchor" number="6.2.4.5">
<h4><span class="header-section-number">6.2.4.5</span> Caches<a href="chap-ci.html#caches" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Installing R packages takes time, a lot of it if they are installed from source (the standard procedure on Ubuntu, but not on MacOS and Windows where binary packages are used by default).
Computing the code chunks is usually the longest step of the workflow.
The <code>cache</code> action caches the results of both operations.</p>
<pre><code>      - name: Cache Renv packages
        uses: actions/cache@v2
        with:
          path: $HOME/.local/share/renv
          key: r-${{ hashFiles(&#39;renv.lock&#39;) }}
          restore-keys: r-
      - name: Cache bookdown results
        uses: actions/cache@v2
        with:
          path: _bookdown_files
          key: bookdown-${{ hashFiles(&#39;**/*Rmd&#39;) }}
          restore-keys: bookdown-</code></pre>
<p>The cache is updated when a package or a piece of code is modified, which requires a quick way to check the modifications: a control value (<em>hashtag</em>) is computed by the <code>hashFiles()</code> function from the <code>renv.lock</code> file (see below) for packages and the set of <code>.Rmd</code> files for pieces of code.
Any change leads to the reinstallation of the packages or the recalculation of the whole code: the cache management is less fine-grained than that of R on a workstation, which only recalculates the modified code chunks.</p>
</div>
<div id="sec:packages-ci" class="section level4 hasAnchor" number="6.2.4.6">
<h4><span class="header-section-number">6.2.4.6</span> Packages<a href="chap-ci.html#sec:packages-ci" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The installation of packages is handled by the <code>install.packages()</code> function.
Rather than listing the packages to be installed in the arguments to the function, which is a source of errors, it is better to use the <strong>renv</strong> package to register all the packages used by the project and install them at once for continuous integration.
<strong>renv</strong> will install the packages in the registered version, which avoids unexpected effects due to different versions between the workstation and GitHub Actions.</p>
<pre><code>      - name: Install packages
        run: |
          R -e &#39;install.packages(&quot;renv&quot;)&#39;
          R -e &#39;renv::restore()&#39;</code></pre>
<p>It is necessary to install <strong>renv</strong> on the workstation used for the development of the project.</p>
<p>A <code>DESCRIPTION</code> file should be used to list the packages for any project, as if it were an R package.
For this document:</p>
<pre><code>Package: WorkingWithR
Title: Working with R
Version: 1.1.0
Authors@R: c(
  person(&quot;Eric&quot;, &quot;Marcon&quot;, , &quot;e.marcon@free.fr&quot;, c(&quot;aut&quot;, &quot;cre&quot;))
  )
URL: https://github.com/EricMarcon/WorkingWithR
Imports:
  bookdown,
  (...)</code></pre>
<p>Before triggering the workflow, it is necessary to create the list of packages in their current version on the workstation:</p>
<p></p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="chap-ci.html#cb459-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>(<span class="at">type =</span> <span class="st">&quot;explicit&quot;</span>)</span></code></pre></div>
<p></p>
<p>When first used, the <strong>renv</strong> package informs of some adaptations to the working environment, which must be accepted.</p>
<p>This command creates the <code>renv.lock</code> file which is used by GitHub Actions to install packages during continuous integration.
It can be updated at any time to take into account their update.</p>
<p>Alternatively, the necessary packages can be installed without the help of <strong>Renv</strong>:</p>
<pre><code>      - name: Install packages
        env:
          GITHUB_PAT: ${{ secrets.GH_PAT }}
        run: |
          options(pkgType = &quot;binary&quot;)
          options(install.packages.check.source = &quot;no&quot;)
          install.packages(c(&quot;remotes&quot;, &quot;bookdown&quot;, &quot;formatR&quot;, &quot;tinytex&quot;))
          tinytex::install_tinytex()
          remotes::install_deps(dependencies = TRUE)
        shell: Rscript {0}</code></pre>
<p>This step uses <code>Rscript</code> as a command environment, which allows it to execute R commands directly (compare to the use of <code>R -e</code> in the previous examples).</p>
<p>The packages used to produce the document are listed:</p>
<ul>
<li><strong>remotes</strong> for its <code>install_deps()</code> function;</li>
<li><strong>bookdown</strong> for knitting;</li>
<li><strong>formatR</strong> for formatting code snippets (<code>tidy=TRUE</code>);</li>
<li><strong>tinytex</strong> to have a LaTeX distribution.</li>
</ul>
<p>The other packages, those used by the project, are read in the <code>DESCRIPTION</code> file by the <code>install_deps()</code> function.</p>
<p>On MacOS, packages are installed by default in binary version, but from their source code if it is more recent.
The creation of binary packages takes a few days at CRAN: this situation is not rare.
Packages containing only R code or C++ code without reference to external libraries can be installed without problems.
On the other hand, if the package requires libraries external to R or a compilation of Fortran code, the installation fails.
It would therefore be necessary to install the necessary libraries (and possibly a Fortran compiler) for all the packages on which the project depends: this solution is not realistic because it implies an inventory of all the dependencies, which may change, and a large number of time-consuming and useless installations most of the time, when the binary packages are up to date.
A better solution is to force the installation of binary packages even if the source code is newer: this is the purpose of the two R options defined before calling <code>install.packages()</code>.</p>
<p>Finally, the secret <code>GH_PAT</code> is passed to R in an environment variable, <code>GITHUB_PAT</code>, necessary to install packages from their source code on GitHub.
GitHub limits the rate of anonymous access for all GitHub actions (all accounts) and may reject the request: in practice, using <code>install_github()</code> in a GitHub action is only possible with this environment variable.</p>
<p>In this approach, packages are not cached.</p>
</div>
<div id="knitting" class="section level4 hasAnchor" number="6.2.4.7">
<h4><span class="header-section-number">6.2.4.7</span> Knitting<a href="chap-ci.html#knitting" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The production of the document is started by an R command.</p>
<pre><code>      - name: Render pdf book
        run: |
          bookdown::render_book(&quot;index.Rmd&quot;, &quot;bookdown::pdf_book&quot;)
        shell: Rscript {0}
      - name: Render gitbook
        run: |
          bookdown::render_book(&quot;index.Rmd&quot;, &quot;bookdown::gitbook&quot;)
        shell: Rscript {0}</code></pre>
<p>The formats set in <code>_output.yml</code> are ignored.</p>
<p>The PDF file must be produced before the GitBook format in order for its download link to be added to the menu bar of the GitBook site.
On the other hand, R must be closed and reopened between the two renderings otherwise the tables are not created correctly in GitBook<a href="#fn109" class="footnote-ref" id="fnref109"><sup>109</sup></a>.
The two steps should not be combined into one.</p>
</div>
<div id="backup" class="section level4 hasAnchor" number="6.2.4.8">
<h4><span class="header-section-number">6.2.4.8</span> Backup<a href="chap-ci.html#backup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The result of the knitting, placed in the <code>docs</code> folder of the virtual machine in charge of continuous integration, must be preserved so that the next job can use it.</p>
<p>The last step of the production job uses the <code>upload-artifact</code> action for this.</p>
<pre><code>      - name: Upload artifact
        uses: actions/upload-artifact@v1
        with:
          name: _book
          path: docs/</code></pre>
<p>The content of <code>docs</code> is saved as an <em>artifact</em> named “_book”.
Artifacts are publicly visible on the GitHub Project Actions page.</p>
<p>After its last step, the virtual machine is destroyed.</p>
</div>
<div id="publication" class="section level4 hasAnchor" number="6.2.4.9">
<h4><span class="header-section-number">6.2.4.9</span> Publication<a href="chap-ci.html#publication" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Publishing the artifact to the <code>gh-pages</code> branch of the project requires another job.</p>
<pre><code>  deploy:
    runs-on: ubuntu-latest
    needs: renderbook
    steps:
      - name: Download artifact
        uses: actions/download-artifact@v1
        with:
          # Artifact name
          name: _book
          # Destination path
          path: docs
      - name: Deploy to GitHub Pages
        uses: Cecilapp/GitHub-Pages-deploy@v3
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
        with:
          email: ${{ secrets.EMAIL }}
          build_dir: docs
          jekyll: no</code></pre>
<p>The job is named “deploy” (the name is free).
It runs on a virtual machine on Ubuntu.
It can only be launched if the “renderbook” job has succeeded.
Its steps are the following:</p>
<ul>
<li><em>Download artifact</em>: Restore the <code>docs</code> folder;</li>
<li><em>Deploy to GitHub Pages</em>: copy the <code>docs</code> folder to the <code>gh-pages</code> branch.</li>
</ul>
<p>This last step uses the <code>GitHub-Pages-deploy</code> action provided by the <em>Cecilapp</em> organization.
It uses an environment variable, <code>GITHUB_TOKEN</code>, to authenticate and parameters:</p>
<ul>
<li><em>email</em>: the email address to which the run report is sent.
To avoid exposing the address publicly, it has been stored in a project secret;</li>
<li><em>buid_dir</em>: the directory to publish,</li>
<li><em>jekyll:no</em> to create an empty file named <code>.nojekyll</code> that tells GitHub pages not to try to treat their content as a Jekyll website.</li>
</ul>
</div>
</div>
<div id="sec:confidentielCI" class="section level3 hasAnchor" number="6.2.5">
<h3><span class="header-section-number">6.2.5</span> Confidential data in a public repository<a href="chap-ci.html#sec:confidentielCI" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If the project contains confidential data (section <a href="chap-git.html#sec:confidential">3.6</a>), GitHub Actions must use the project’s private key to extract it from their vault.</p>
<p>The private key must be stored in a project secret, named “RSA”.
The next step, to be inserted before the knitting step, writes the key to a file for the project code to access.</p>
<pre><code>      - name: Private key
        run: |
          cat(&quot;${{ secrets.rsa }}&quot;, file=&quot;&lt;RepoID&gt;.rsa&quot;
        shell: Rscript {0}</code></pre>
</div>
</div>
<div id="script-templates" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Script templates<a href="chap-ci.html#script-templates" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Script templates for all types of projects are presented here.
All of them require the same preparation:</p>
<ul>
<li><code>GH_PAT</code> and <code>EMAIL</code> secrets must be registered in the GitHub project (section <a href="chap-ci.html#sec:secrets-ci">6.2.2</a>);</li>
<li>a <code>DESCRIPTION</code> file must be used to list the required packages (section <a href="chap-package.html#sec:package-description">5.2.1</a>), regardless of the project type;</li>
<li>a snapshot of the installed packages (<code>renv.lock</code>) must be made if <strong>renv</strong> (section <a href="chap-ci.html#sec:packages-ci">6.2.4.6</a>) is used.</li>
</ul>
<p>The <code>gh-pages</code> branch is created automatically by the scripts.
Check after the first execution that GitHub pages are enabled on this branch (section <a href="chap-git.html#sec:github-pages">3.7</a>).
Then delete the <code>docs</code> folder if it existed, push the modification on GitHub and finally add the following line to the <code>.gitignore</code> file to be able to knit the projects locally without disturbing GitHub:</p>
<pre><code>docs/</code></pre>
<div id="sec:memoiR-ci" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> memoiR<a href="chap-ci.html#sec:memoiR-ci" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>build_ghworkflow()</code> function of the <strong>memoiR</strong> package automatically creates the scripts needed to produce the package’s templates.
The script is always named <code>memoir.yml</code>.</p>
<p>These scripts do not use <strong>renv</strong> or cache.
They do not need a <code>DESCRIPTION</code> file for the installation of the dependencies but each document must contain in its parameter code (<code>Options</code>) the list of all packages needed for its knitting (stored in the <code>Packages</code> variable).</p>
</div>
<div id="sec:bookdown-ci" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Book or thesis<a href="chap-ci.html#sec:bookdown-ci" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The workflow is called <code>rmarkdown</code>; its production job is <code>render</code>.</p>
<pre><code>on:
  push:
   branches:
     - master

name: rmarkdown

jobs:
  render:
    runs-on: macOS-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
      - name: Setup R
        uses: r-lib/actions/setup-r@v1
      - name: Install pandoc
        uses: r-lib/actions/setup-pandoc@v1
      - name: Install dependencies
        run: |
          options(pkgType = &quot;binary&quot;)
          options(install.packages.check.source = &quot;no&quot;)
          install.packages(c(&quot;memoiR&quot;, &quot;rmdformats&quot;, &quot;tinytex&quot;))
          tinytex::install_tinytex()
        shell: Rscript {0}
      - name: Render pdf book
        run: |
          bookdown::render_book(&quot;index.Rmd&quot;, &quot;bookdown::pdf_book&quot;)
        shell: Rscript {0}
      - name: Render gitbook
        run: |
          bookdown::render_book(&quot;index.Rmd&quot;, &quot;bookdown::gitbook&quot;)
        shell: Rscript {0}
      - name: Upload artifact
        uses: actions/upload-artifact@v1
        with:
          name: ghpages
          path: docs
  deploy:
    runs-on: ubuntu-latest
    needs: render
    steps:
      - name: Download artifact
        uses: actions/download-artifact@v1
        with:
          name: ghpages
          path: docs
      - name: Deploy to GitHub Pages
        uses: Cecilapp/GitHub-Pages-deploy@v3
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
        with:
          email: ${{ secrets.EMAIL }}
          build_dir: docs
          jekyll: no</code></pre>
</div>
<div id="articles-or-slideshows" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Articles or slideshows<a href="chap-ci.html#articles-or-slideshows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The workflow is called <code>rmarkdown</code>; its production job is <code>render</code>.</p>
<pre><code>on:
  push:
   branches:
     - master

name: rmarkdown

jobs:
  render:
    runs-on: macOS-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
      - name: Setup R
        uses: r-lib/actions/setup-r@v1
      - name: Install pandoc
        uses: r-lib/actions/setup-pandoc@v1
      - name: Install dependencies
        run: |
          options(pkgType = &quot;binary&quot;)
          options(install.packages.check.source = &quot;no&quot;)
          install.packages(c(&quot;memoiR&quot;, &quot;rmdformats&quot;, &quot;tinytex&quot;))
          tinytex::install_tinytex()
        shell: Rscript {0}
      - name: Render Rmarkdown files
        run: |
          RMD_PATH=($(ls | grep &quot;[.]Rmd$&quot;))
          Rscript -e &#39;for (file in commandArgs(TRUE)) |&gt;
              rmarkdown::render(file, &quot;all&quot;)&#39; ${RMD_PATH[*]}
          Rscript -e &#39;memoiR::build_githubpages()&#39;
      - name: Upload artifact
        uses: actions/upload-artifact@v1
        with:
          name: ghpages
          path: docs
  deploy:
    runs-on: ubuntu-latest
    needs: render
    steps:
      - name: Download artifact
        uses: actions/download-artifact@v1
        with:
          name: ghpages
          path: docs
      - name: Deploy to GitHub Pages
        uses: Cecilapp/GitHub-Pages-deploy@v3
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
        with:
          email: ${{ secrets.EMAIL }}
          build_dir: docs
          jekyll: yes</code></pre>
<p>The knitting stage uses a script to list all the <code>.Rmd</code> files, process them (all the output formats listed in their yaml header are produced).
The <code>build_githubpages()</code> function (see section <a href="chap-rediger.html#sec:memo">4.3.2</a>) places the results in <code>docs</code>.</p>
<p>The deployment job tells GitHub pages to use Jekyll, i.e. to use the <code>README.md</code> file as the home page.</p>
<div id="localization" class="section level4 hasAnchor" number="6.3.3.1">
<h4><span class="header-section-number">6.3.3.1</span> Localization<a href="chap-ci.html#localization" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If the knitting step needs to change the language used by R, for example to correctly display the production date of documents, it can be changed like this:</p>
<pre><code>      - name: Render Rmarkdown files
        run: |
          Sys.setlocale(&quot;LC_TIME&quot;, &quot;fr_FR&quot;)
          lapply(list.files(pattern=&quot;*.Rmd&quot;), 
                            function(file) rmarkdown::render(file, &quot;all&quot;))
          memoiR::build_githubpages()
        shell: Rscript {0}</code></pre>
<p>The selection of files is done by an R script, which includes a localization command, here in French.</p>
<p>This step can be completed by selecting a GitHub Pages theme so that the home page contains a link to the code:</p>
<pre><code>        run: |
          echo &#39;theme: jekyll-theme-slate&#39; &gt; docs/_config.yml</code></pre>
<p>The theme here is “Slate”, one of the choices offered by the GitHub pages.</p>
</div>
<div id="debugging" class="section level4 hasAnchor" number="6.3.3.2">
<h4><span class="header-section-number">6.3.3.2</span> Debugging<a href="chap-ci.html#debugging" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It can happen that the compilation of the <code>.tex</code> file to produce the PDF file fails, although knitting in HTML does not generate an error.
The LaTeX compiler is indeed more demanding than pandoc (which produces the HTML file).</p>
<p>The first check consists in knitting the problematic document into PDF locally, on your workstation, with <strong>tinytex</strong>.
The LaTeX packages must be updated to be the same as those used by the GitHub actions: to do this, run:</p>
<p></p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="chap-ci.html#cb470-1" aria-hidden="true" tabindex="-1"></a>tinytex<span class="sc">::</span><span class="fu">tlmgr_update</span>()</span></code></pre></div>
<p></p>
<p>If the compilation works locally but not on Github, you have to inspect the <code>.log</code> file which records all the events generated by the compiler, but this file is not kept after the failure of GitHub Actions.
So you have to modify the script to copy the file in <code>docs</code> and then save the result despite the error.</p>
<p>The “Upload artifact” step is modified to run despite the failure of the previous step by adding the line <code>if:</code>:</p>
<pre><code>      - name: Upload artifact
        if: always()
        uses: actions/upload-artifact@v1
        with:
          name: _book
          path: docs/</code></pre>
<p>A step is added before “Upload artifact” to copy the result of the knitting and the <code>.log</code> file:</p>
<pre><code>      - name: Move files to docs
        if: always()
        run: |
          Rscript -e &#39;memoiR::build_githubpages()&#39;
          cp *.log docs</code></pre>
<p>After the action fails, the saved artifact can be downloaded from GitHub: it is on the action summary page.
It is a compressed file that contains the whole <code>docs</code> folder.</p>
</div>
</div>
<div id="sec:blogdown-ci" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Blogdown website<a href="chap-ci.html#sec:blogdown-ci" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The file called <code>blogdown.yml</code> is very similar.
The name of the workflow is <code>blogdown</code> and the name of the production job is <code>buildsite</code>.</p>
<pre><code>on:
  push:
     branches:
       - master
  schedule:
    - cron: &#39;0 22 * * 0&#39;

name: blogdown

jobs:
  buildsite:
    runs-on: macOS-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v2
      - name: Setup R
        uses: r-lib/actions/setup-r@v1
      - name: Install pandoc
        uses: r-lib/actions/setup-pandoc@v1
      - name: Install packages
        run: |
          options(pkgType = &quot;binary&quot;)
          options(install.packages.check.source = &quot;no&quot;)
          install.packages(c(&quot;remotes&quot;, &quot;blogdown&quot;, &quot;formatR&quot;))
          remotes::install_deps(dependencies = TRUE)
        shell: Rscript {0}
      - name: Build website
        run: |
          blogdown::install_hugo(force = TRUE)
          blogdown::build_site(local = TRUE, build_rmd = TRUE)
        shell: Rscript {0}
      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
          name: _website
          path: public/
  deploy:
    runs-on: ubuntu-latest
    needs: buildsite
    steps:
      - name: Download artifact
        uses: actions/download-artifact@v1
        with:
          # Artifact name
          name: _website
          # Destination path
          path: public
      - name: Deploy to GitHub Pages
        uses: Cecilapp/GitHub-Pages-deploy@v3
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
        with:
          build_dir: public
          email: ${{ secrets.EMAIL }}
          jekyll: no</code></pre>
<p>The <code>Build website</code> step uses the <strong>blogdown</strong> package to install Hugo (the website generator) and then build the website.</p>
<p>If the website uses online data that warrants periodic updating, GitHub Actions can be run daily, weekly or monthly in addition to the rebuilds triggered by a repository change (see section <a href="chap-ci.html#sec:declenchement">6.2.4.1</a>).
Here, the site is rebuilt every Sunday at 10pm.</p>
<p>Example: the page that displays the bibliometrics of the author’s website<a href="#fn110" class="footnote-ref" id="fnref110"><sup>110</sup></a> queries Google Scholar to display the citations of the publications.
The site is updated weekly to keep the statistics current.</p>
</div>
<div id="sec:package-ci6" class="section level3 hasAnchor" number="6.3.5">
<h3><span class="header-section-number">6.3.5</span> R Packages<a href="chap-ci.html#sec:package-ci6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An optimal script for checking a package is as follows:</p>
<pre><code>on:
  push:
    branches:
      - master

name: R-CMD-check

jobs:
  R-CMD-check:
    runs-on: macOS-latest
    env:
      GITHUB_PAT: ${{ secrets.GH_PAT }}
    steps:
      - uses: actions/checkout@v2
      - uses: r-lib/actions/setup-r@v1
      - name: Install pandoc
        uses: r-lib/actions/setup-pandoc@v1
      - name: Install dependencies
        run: |
          options(pkgType = &quot;binary&quot;)
          options(install.packages.check.source = &quot;no&quot;)
          install.packages(c(&quot;remotes&quot;, &quot;rcmdcheck&quot;, &quot;covr&quot;, &quot;pkgdown&quot;))
          remotes::install_deps(dependencies = TRUE)
        shell: Rscript {0}
      - name: Check
        run: rcmdcheck::rcmdcheck(args = &quot;--no-manual&quot;, error_on = &quot;warning&quot;)
        shell: Rscript {0}
      - name: Test coverage
        run: covr::codecov(type=&quot;all&quot;)
        shell: Rscript {0}
      - name: Install package
        run: R CMD INSTALL .
      - name: Pkgdown
        run: |
          git config --local user.email &quot;actions@github.com&quot;
          git config --local user.name &quot;GitHub Actions&quot;
          Rscript -e &#39;pkgdown::deploy_to_branch(new_process = FALSE)&#39;</code></pre>
<p>The file is named <code>check.yml</code>.
It contains only one job, named <code>R-CMD-check</code>, as the workflow.</p>
<p>The script does not use <strong>Renv</strong> to handle packages because package checking must work with the current versions on CRAN.
<strong>Remotes</strong> installs the necessary packages from the <code>DESCRIPTION</code> file.</p>
<p>The <code>Check</code> step checks the package.
Warnings are treated as errors.</p>
<p>The <code>Test coverage</code> step uses the <strong>covr</strong> package to measure the coverage rate and uploads the results to the Codecov site.</p>
<p>Finally, the last two steps install the package and then use <strong>pkgdown</strong> to create the documentation site for the package and push it into the <code>gh-pages</code> branch of the project.</p>
<p>This script contains only one job: the deployment of the documentation site is directly executed by <strong>pkgdown</strong>.
Its success is displayed by a badge in the <code>README.md</code> file (see section <a href="chap-ci.html#sec:ci-badges">6.4</a>)</p>
<p>More complex scripts are proposed by R-lib<a href="#fn111" class="footnote-ref" id="fnref111"><sup>111</sup></a>, in particular to run the tests on several operating systems and several versions of R.
These advanced tests are to be performed before submitting to CRAN (section <a href="chap-package.html#sec:package-cran">5.11</a>) but consume too much resource for systematic use.</p>
</div>
</div>
<div id="sec:ci-badges" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Add badges<a href="chap-ci.html#sec:ci-badges" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The success of GitHub Actions can be seen by adding a badge to the <code>README.md</code> file, right after the file title.
On the project page, choose “Actions” then select the action (in “Workflows”).
Click on the “…” button and then on “Create Status Badge”.
Paste the Markdown code:</p>
<pre><code># Project name
![bookdown](https://github.com/&lt;GitHubID&gt;/&lt;RepoID&gt;/workflows/&lt;Workflow&gt;/badge.svg)</code></pre>
<p>The name of the workflow was declared in the <code>name:</code> entry in the GitHub actions configuration file.</p>
<p>The coverage rate measured by Codecov can also be displayed by a badge:</p>
<pre><code>[![codecov](https://codecov.io/github/&lt;GitHubID&gt;/
  &lt;RepoID&gt;/branch/master/graphs/badge.svg)]
  (https://codecov.io/github/&lt;GitHubID&gt;/&lt;RepoID&gt;)</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="103">
<li id="fn103"><p><a href="https://travis-ci.org/" class="uri">https://travis-ci.org/</a><a href="chap-ci.html#fnref103" class="footnote-back">↩︎</a></p></li>
<li id="fn104"><p><a href="https://codecov.io/" class="uri">https://codecov.io/</a><a href="chap-ci.html#fnref104" class="footnote-back">↩︎</a></p></li>
<li id="fn105"><p><a href="https://github.com/EricMarcon/WorkingWithR/blob/master/.github/workflows/bookdown.yml" class="uri">https://github.com/EricMarcon/WorkingWithR/blob/master/.github/workflows/bookdown.yml</a><a href="chap-ci.html#fnref105" class="footnote-back">↩︎</a></p></li>
<li id="fn106"><p><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on" class="uri">https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on</a><a href="chap-ci.html#fnref106" class="footnote-back">↩︎</a></p></li>
<li id="fn107"><p><a href="https://github.com/actions/" class="uri">https://github.com/actions/</a><a href="chap-ci.html#fnref107" class="footnote-back">↩︎</a></p></li>
<li id="fn108"><p><a href="https://github.com/r-lib/" class="uri">https://github.com/r-lib/</a><a href="chap-ci.html#fnref108" class="footnote-back">↩︎</a></p></li>
<li id="fn109"><p><a href="https://stackoverflow.com/questions/46080853/why-does-rendering-a-pdf-from-rmarkdown-require-closing-rstudio-between-renders/46083308#46083308" class="uri">https://stackoverflow.com/questions/46080853/why-does-rendering-a-pdf-from-rmarkdown-require-closing-rstudio-between-renders/46083308#46083308</a><a href="chap-ci.html#fnref109" class="footnote-back">↩︎</a></p></li>
<li id="fn110"><p><a href="https://EricMarcon.github.io/fr/publication/" class="uri">https://EricMarcon.github.io/fr/publication/</a><a href="chap-ci.html#fnref110" class="footnote-back">↩︎</a></p></li>
<li id="fn111"><p><a href="https://github.com/r-lib/actions/tree/master/examples#standard-ci-workflow" class="uri">https://github.com/r-lib/actions/tree/master/examples#standard-ci-workflow</a><a href="chap-ci.html#fnref111" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-package.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["WwR.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
